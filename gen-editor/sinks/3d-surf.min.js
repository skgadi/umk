function clearData(){fullData[0].z=[],reactTheChart()}function appendData(e){fullData[0].x=e[e.length-1].v[0].r,fullData[0].y=e[e.length-1].v[1].r,fullData[0].z=e[e.length-1].v[2].r,reactTheChart()}function updateConfiguration(){for(let e=0;e<fullData.length;e++){const t=fullData[e];t.contours.z.width=settings.width,t.visible=!settings.showIm&&e%2?"legendonly":"true",t.reversescale=settings.reversescale,t.colorscale=settings.colorscale}reactTheChart()}function reactTheChart(){Plotly.react("chart",fullData,settings.chartLayout)}function updateColors(){document.getElementsByTagName("html")[0].className=settings.mSettings.theme,settings.chartLayout.plot_bgcolor=window.getComputedStyle(document.getElementById("css-ref-ele-0"),null).getPropertyValue("background-color"),settings.chartLayout.paper_bgcolor=window.getComputedStyle(document.getElementById("css-ref-ele-0"),null).getPropertyValue("background-color"),settings.chartLayout.font.color=window.getComputedStyle(document.getElementById("css-ref-ele-0"),null).getPropertyValue("color"),["xaxis","yaxis","zaxis"].forEach(function(e){settings.chartLayout.scene[e].tickcolor=window.getComputedStyle(document.getElementById("css-ref-ele-0"),null).getPropertyValue("color"),settings.chartLayout.scene[e].gridcolor=window.getComputedStyle(document.getElementById("css-ref-ele-0"),null).getPropertyValue("border-color"),settings.chartLayout.scene[e].zerolinecolor=window.getComputedStyle(document.getElementById("css-ref-ele-0"),null).getPropertyValue("color")}),reactTheChart()}const settings={width:5,reversescale:!1,mode:"lines",showIm:!1,limitData:1e3,mSettings:{},colorscale:"jet",noOfPlots:1,chartLayout:{paper_bgcolor:"#ffffff00",plot_bgcolor:"#ffffff00",font:{color:"#000"},scene:{xaxis:{tickcolor:"#000",gridcolor:"#888",zerolinecolor:"#000"},yaxis:{tickcolor:"#000",gridcolor:"#888",zerolinecolor:"#000"},zaxis:{tickcolor:"#000",gridcolor:"#888",zerolinecolor:"#000"}},margin:{l:0,r:0,b:0,t:0},legend:{y:.5}},chartConfig:{displaylogo:!1,toImageButtonOptions:{filename:"umk_3D_line_chart"},responsive:!0}};let fullData=[{x:[],y:[],z:[],type:"surface",colorscale:"Greens",contours:{z:{show:!0,usecolormap:!0,project:{z:!0},width:settings.width}}}];Plotly.newPlot("chart",fullData,settings.chartLayout,settings.chartConfig),onmessage=function(e){e.data.d&&appendData(e.data.d),e.data.r&&clearData(),e.data.c&&(settings.width=JSON.parse(e.data.c.Parameters.width.Value)[0][0],settings.reversescale=!!e.data.c.Parameters.reversescale.Value[0][0],settings.colorscale=e.data.c.Parameters.colorscale.Value[0][0],updateConfiguration()),e.data.s&&(settings.mSettings=e.data.s,updateColors())};